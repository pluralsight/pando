---
tags: [Development, Packages, Components, Headless Styles, Modal]
title: Modal
---

<!-- TODO: As of 2.0.0-beta.17 live-codeblock do not support imports. -->
<!-- Keep an eye out so we can kill the components we are importing in. -->
<!-- https://docusaurus.io/docs/markdown-features/code-blocks#imports -->

import CodeBlock from '@theme/CodeBlock'
import BasicModal from '@site/src/components/Modal/BasicModal'
import {
  BasicModalPreview,
  BasicModalFullPreview,
} from '@site/src/components/Modal/BasicModal.preview'
import ViewSourceLink from '@site/src/components/ViewSourceLink/ViewSourceLink'
import LiveExampleTabs from '@site/src/components/LiveExampleTabs/LiveExampleTabs'

A modal is a dialog that focuses the user's attention exclusively on information via a window that is overlaid on primary content.
Only the content within the modal can be interacted with while it is active.

:::tip

When you need to collect a mandatory user confirmation, use the [Confirm Dialog](./ConfirmDialog.mdx)

:::

<ViewSourceLink
  icon="github"
  href="https://github.com/pluralsight/tva/tree/main/packages/headless-styles/src/components/Modal"
>
  View source
</ViewSourceLink>

## Import

```javascript
import { getModalProps } from '@pluralsight/headless-styles'
```

## Usage

### Basic Modal

<BasicModal />
<LiveExampleTabs
  fullCode={<BasicModalFullPreview />}
  sandboxList={{
    chakra: 'basic-modal-react-chakra-zh2czl',
    joy: 'basic-modal-mui-t5cu7m',
    styled: 'basic-modal-sc-31kyw3',
    svelte: 'basic-modal-svelte-xydsf7',
  }}
>
  <BasicModalPreview />
</LiveExampleTabs>

### React Performance Requirements

To ensure you are keeping your app as performant as possible when creating a Modal component, there are a few helpers you will need to include in your code to deliver the highest quality result.

#### Use React-utils

We have a helper package @pluralsight/react-utils that you can use (we include in the expanded code example of the Basic Modal section) which contains custom hooks and other helpers to reduce your code base and keep the Modal a11y compliant.

- [`useFocusTrap`](../react-utils/use-focus-trap.mdx) - custom hook that keeps the focus trapped within a modal when it is active. When the modal is closed, it returns focus to the component that triggered the modal to open.
- [`useEscToClose`](../react-utils/use-esc-to-close.mdx) - custom hook that registers an event to close the modal when the "Escape" key is pressed.

#### Use ForwardRef

Due to the nature of how React works with passing Ref Objects, in order for the `useFocusTrap` hook to work, you need to wrap your Modal component in the [`forwardRef` function](https://reactjs.org/docs/forwarding-refs.html#gatsby-focus-wrapper) to ensure the `triggerRef` has successfully passed into your component for use in the custom hook.

:::caution

Not using `forwardRef` will prevent some functionality of the hook from working. **It will not break your app**, but the hook will not return the focus back to the original trigger which opened it (i.e. your app will not be a11y compliant).

:::

```javascript title="Example using forwardRef"
const Modal = forwardRef(ModalEl)
```

#### Use Memo

Lastly, you should wrap your ForwardedRef Component with the `memo` function to ensure your Modal component does not unnecessarily re-render/commit from the complex properties that may be passed in. This is another good practice that should become second nature when building components that accept complex properties (i.e., anything that is not a [Primitive](https://developer.mozilla.org/en-US/docs/Glossary/Primitive)).

```javascript title="Example using memo with forwardRef"
const Modal = memo(forwardRef(ModalEl))
```

## Accessibility

To make the Modal as accessible as possible, we use a few required parameters to add additional a11y functionality to the component.

- id - sets the `id` attribute on the body content for the modal
- headerId - used for the `aria-labeledby` attribute on the `section` element and set as the `id` on the title content for the modal
- bodyId - used for the `aria-describedby` attribute on the `section` element
- ariaLabel - used **only** when the headerId is absent to provide a label for non-sighted users

### Additional Aria Features

We also provide additional attributes that do not require any input from the API parameters.

- role - set to "dialog"
- aria-modal - set to "true"
- When the dialog is opened, focus is set to the first focusable element in the `section` child heirarchy.
- When the dialog opens, the content in the `section` element are announced by screen readers via the custom props above.
- Clicking on the overlay closes the dialog
- Pressing the "Escape" key closes the dialog

## API

| Name              | Argument Type                              | Default         | Description                     |
| ----------------- | ------------------------------------------ | --------------- | ------------------------------- |
| `getModalProps`   | **options**: [ModalOptions](#modaloptions) |                 | Get modal styles for CSS usage. |
| `getJSModalProps` | **options**: [ModalOptions](#modaloptions) | same as CSS API | CSS-in-JS API                   |

## Options

### ModalOptions

This interface is available as an `import` for use.

```typescript
interface ModalOptions extends FieldOptions {
  ariaLabel?: string
  id: string
  headerId?: string
  bodyId: string
  tech?: 'svelte'
}
```

```typescript title="Import example"
import type { ModalOptions } from '@pluralsight/headless-styles/types'
```

## Props

### ModalProps

```typescript
interface ModalProps {
  backdrop: {
    className: string
  }
  buttonWrapper: {
    className: string
  }
  cancelBtnOptions: {
    ariaLabel: 'Close dialog'
    sentiment: 'default'
    size: 'l'
    tech?: 'svelte'
    usage: 'text'
  }
  focusGuard: {
    'aria-hidden': true
    className: string
    'data-focus-guard': true
    tabIndex: 0
  }
  modalHeading: {
    className: string
    id: string
  }
  modalBody: {
    className: string
    id: string
  }
  section: {
    'aria-modal': true
    'aria-describedby': string
    'aria-label'?: string
    'aria-labelledby'?: string
    className: string
    id: string
    role: 'dialog'
    tabIndex: -1
  }
  wrapper: {
    className: string
    'data-focus-lock-disabled': false
    tabIndex: -1
  }
}
```

### JSModalProps

```typescript
interface JSModalProps {
  backdrop: {
    cssProps: TemplateLiteralString
    styles: Record<string, unknown>
  }
  buttonWrapper: {
    cssProps: TemplateLiteralString
    styles: Record<string, unknown>
  }
  cancelBtnOptions: {
    ariaLabel: 'Close dialog'
    sentiment: 'default'
    size: 'l'
    tech?: 'svelte'
    usage: 'text'
  }
  focusGuard: {
    a11yProps: {
      'aria-hidden': true
      'data-focus-guard': true
      tabIndex: 0
    }
    cssProps: TemplateLiteralString
    styles: Record<string, unknown>
  }
  modalHeading: {
    a11yProps: {
      id: string
    }
    cssProps: TemplateLiteralString
    styles: Record<string, unknown>
  }
  modalBody: {
    a11yProps: {
      id: string
    }
    cssProps: TemplateLiteralString
    styles: Record<string, unknown>
  }
  section: {
    a11yProps: {
      'aria-modal': true
      'aria-describedby': string
      'aria-label'?: string
      'aria-labelledby'?: string
      id: string
      role: 'dialog'
      tabIndex: -1
    }
    cssProps: TemplateLiteralString
    styles: Record<string, unknown>
  }
  wrapper: {
    a11yProps: {
      'data-focus-lock-disabled': false
      tabIndex: -1
    }
    cssProps: TemplateLiteralString
    styles: Record<string, unknown>
  }
}
```
